## 数据科学家工作报告

### 1. 数据资产概览
- **LC.csv**：328,553 条借款标的记录，包含借款金额、期限、评级、认证信息及历史借款行为等特征。
- **LP.csv**：3,203,276 条期次还款记录，涵盖应还/实还明细，记录日统一为 2017-02-22。
- **LCIS.csv**：292,539 条投资者快照数据，提供标的当前状态、已还/待还金额等信息。
- 三表围绕 `ListingId` 关联，LC 与 LP 完全匹配，LCIS 为局部快照。

### 2. 数据质量问题与处理
- **缺失与异常**：
  - LP 的 `还款日期` 缺失比例约 48.7%，对应仍未还款期次；通过 `recorddate` 判断逾期。
  - LCIS 中 `下次计划还款金额` 缺失，与尚未生成计划的状态一致。
  - LC 中年龄极值（<18 或 >70）按缺失处理后以中位数填补。
- **编码统一**：
  - 认证字段统一映射为二值；性别、借款类型缺失填入“未知”。
  - 日期字段转换为 `datetime64[ns]`，并提取年、月、季度、周几等衍生特征。

### 3. 标签构建策略
- LCIS：若 `标当前状态` 含“逾期”则标记为 1。
- LP：
  - 状态为 2（已逾期还款）直接记逾期。
  - 正常/逾期还款比较 `还款日期` 与 `到期日期`；若延迟则记逾期。
  - 未还款期次（状态 0/4）且 `recorddate` 超过 `到期日期` 视为逾期。
- 组合规则：优先 LP 逻辑，缺失部分补充 LCIS 结果，最终逾期率约 28.8%。

### 4. 特征工程亮点
- 行为类：历史逾期率、历史还款能力指数、借款杠杆比、待还本金占比等。
- 时间类：借款成功日期的年/月/季度/周几，辅助捕捉季节性风险。
- LP 聚合：期次层面统计正常/逾期期数与按期还款率。
- 特征总览与缺失填补策略详见 `docs/data_processing_design.md`。

### 5. 数据交付
- 清洗与合并结果输出至 `data/interim/loan_master.parquet`。
- 可建模数据按 70/15/15 分层拆分并保存至 `data/processed/`，确保标签比例稳定。
- 所有步骤封装在 `src/pipelines/prepare_data.py`，支持参数化复现。

